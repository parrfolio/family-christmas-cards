//easing, mustache, icanhaz, booklet, cyclic fade

jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});var Mustache=function(){var Renderer=function(){};Renderer.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(template,context,partials,in_recursion){if(!in_recursion){this.context=context;this.buffer=[];}
if(!this.includes("",template)){if(in_recursion){return template;}else{this.send(template);return;}}
template=this.render_pragmas(template);var html=this.render_section(template,context,partials);if(in_recursion){return this.render_tags(html,context,partials,in_recursion);}
this.render_tags(html,context,partials,in_recursion);},send:function(line){if(line!=""){this.buffer.push(line);}},render_pragmas:function(template){if(!this.includes("%",template)){return template;}
var that=this;var regex=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+
this.ctag);return template.replace(regex,function(match,pragma,options){if(!that.pragmas_implemented[pragma]){throw({message:"This implementation of mustache doesn't understand the '"+
pragma+"' pragma"});}
that.pragmas[pragma]={};if(options){var opts=options.split("=");that.pragmas[pragma][opts[0]]=opts[1];}
return"";});},render_partial:function(name,context,partials){name=this.trim(name);if(!partials||partials[name]===undefined){throw({message:"unknown_partial '"+name+"'"});}
if(typeof(context[name])!="object"){return this.render(partials[name],context,partials,true);}
return this.render(partials[name],context[name],partials,true);},render_section:function(template,context,partials){if(!this.includes("#",template)&&!this.includes("^",template)){return template;}
var that=this;var regex=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return template.replace(regex,function(match,type,name,content){var value=that.find(name,context);if(type=="^"){if(!value||that.is_array(value)&&value.length===0){return that.render(content,context,partials,true);}else{return"";}}else if(type=="#"){if(that.is_array(value)){return that.map(value,function(row){return that.render(content,that.create_context(row),partials,true);}).join("");}else if(that.is_object(value)){return that.render(content,that.create_context(value),partials,true);}else if(typeof value==="function"){return value.call(context,content,function(text){return that.render(text,context,partials,true);});}else if(value){return that.render(content,context,partials,true);}else{return"";}}});},render_tags:function(template,context,partials,in_recursion){var that=this;var new_regex=function(){return new RegExp(that.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+
that.ctag+"+","g");};var regex=new_regex();var tag_replace_callback=function(match,operator,name){switch(operator){case"!":return"";case"=":that.set_delimiters(name);regex=new_regex();return"";case">":return that.render_partial(name,context,partials);case"{":return that.find(name,context);default:return that.escape(that.find(name,context));}};var lines=template.split("\n");for(var i=0;i<lines.length;i++){lines[i]=lines[i].replace(regex,tag_replace_callback,this);if(!in_recursion){this.send(lines[i]);}}
if(in_recursion){return lines.join("\n");}},set_delimiters:function(delimiters){var dels=delimiters.split(" ");this.otag=this.escape_regex(dels[0]);this.ctag=this.escape_regex(dels[1]);},escape_regex:function(text){if(!arguments.callee.sRE){var specials=['/','.','*','+','?','|','(',')','[',']','{','}','\\'];arguments.callee.sRE=new RegExp('(\\'+specials.join('|\\')+')','g');}
return text.replace(arguments.callee.sRE,'\\$1');},find:function(name,context){name=this.trim(name);function is_kinda_truthy(bool){return bool===false||bool===0||bool;}
var value;if(is_kinda_truthy(context[name])){value=context[name];}else if(is_kinda_truthy(this.context[name])){value=this.context[name];}
if(typeof value==="function"){return value.apply(context);}
if(value!==undefined){return value;}
return"";},includes:function(needle,haystack){return haystack.indexOf(this.otag+needle)!=-1;},escape:function(s){s=String(s===null?"":s);return s.replace(/&(?!\w+;)|["<>\\]/g,function(s){switch(s){case"&":return"&";case"\\":return"\\\\";case'"':return'\"';case"<":return"<";case">":return">";default:return s;}});},create_context:function(_context){if(this.is_object(_context)){return _context;}else{var iterator=".";if(this.pragmas["IMPLICIT-ITERATOR"]){iterator=this.pragmas["IMPLICIT-ITERATOR"].iterator;}
var ctx={};ctx[iterator]=_context;return ctx;}},is_object:function(a){return a&&typeof a=="object";},is_array:function(a){return Object.prototype.toString.call(a)==='[object Array]';},trim:function(s){return s.replace(/^\s*|\s*$/g,"");},map:function(array,fn){if(typeof array.map=="function"){return array.map(fn);}else{var r=[];var l=array.length;for(var i=0;i<l;i++){r.push(fn(array[i]));}
return r;}}};return({name:"mustache.js",version:"0.3.1-dev",to_html:function(template,view,partials,send_fun){var renderer=new Renderer();if(send_fun){renderer.send=send_fun;}
renderer.render(template,view,partials);if(!send_fun){return renderer.buffer.join("\n");}}});}();var ich;(function($){function ICanHaz(){var that=this,spec={cache:{}};this.VERSION="0.5";this.addTemplate=function(name,templateString){if(spec.cache.hasOwnProperty(name)){throw"You've already got a template by the name: \""+name+'"'}else{spec.cache[name]=templateString;that[name]=function(data,raw){data=data||{};if(raw){return Mustache.to_html(spec.cache[name],data)}else{return $(Mustache.to_html(spec.cache[name],data))}}}};$('script[type="text/html"]').each(function(){var title=$(this).attr("id");that.addTemplate(title,$(this).html());$(this).remove()})}$(function(){ich=new ICanHaz()})})(jQuery);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){if(!l){l=2;}
return("000"+s).slice(l*-1);};$P.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};$P.setTimeToNow=function(){var n=new Date();this.setHours(n.getHours());this.setMinutes(n.getMinutes());this.setSeconds(n.getSeconds());this.setMilliseconds(n.getMilliseconds());return this;};$D.today=function(){return new Date().clearTime();};$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2)){throw new Error(date1+" - "+date2);}else if(date1 instanceof Date&&date2 instanceof Date){return(date1<date2)?-1:(date1>date2)?1:0;}else{throw new TypeError(date1+" - "+date2);}};$D.equals=function(date1,date2){return(date1.compareTo(date2)===0);};$D.getDayNumberFromName=function(name){var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s){return i;}}
return-1;};$D.getMonthNumberFromName=function(name){var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};$D.isLeapYear=function(year){return((year%4===0&&year%100!==0)||year%400===0);};$D.getDaysInMonth=function(year,month){return[31,($D.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};$D.getTimezoneAbbreviation=function(offset){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].offset===offset){return z[i].name;}}
return null;};$D.getTimezoneOffset=function(name){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].name===name.toUpperCase()){return z[i].offset;}}
return null;};$P.clone=function(){return new Date(this.getTime());};$P.compareTo=function(date){return Date.compare(this,date);};$P.equals=function(date){return Date.equals(this,date||new Date());};$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime();};$P.isAfter=function(date){return this.compareTo(date||new Date())===1;};$P.isBefore=function(date){return(this.compareTo(date||new Date())===-1);};$P.isToday=function(){return this.isSameDay(new Date());};$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime());};$P.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};$P.addSeconds=function(value){return this.addMilliseconds(value*1000);};$P.addMinutes=function(value){return this.addMilliseconds(value*60000);};$P.addHours=function(value){return this.addMilliseconds(value*3600000);};$P.addDays=function(value){this.setDate(this.getDate()+value);return this;};$P.addWeeks=function(value){return this.addDays(value*7);};$P.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};$P.addYears=function(value){return this.addMonths(value*12);};$P.add=function(config){if(typeof config=="number"){this._orient=config;return this;}
var x=config;if(x.milliseconds){this.addMilliseconds(x.milliseconds);}
if(x.seconds){this.addSeconds(x.seconds);}
if(x.minutes){this.addMinutes(x.minutes);}
if(x.hours){this.addHours(x.hours);}
if(x.weeks){this.addWeeks(x.weeks);}
if(x.months){this.addMonths(x.months);}
if(x.years){this.addYears(x.years);}
if(x.days){this.addDays(x.days);}
return this;};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;$y=(!$y)?this.getFullYear():$y;$m=(!$m)?this.getMonth()+1:$m;$d=(!$d)?this.getDate():$d;if($m<=2){a=$y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=$d-1+(31*($m-1));}else{a=$y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=$d+((153*($m-3)+2)/5)+58+s;}
g=(a+b)%7;d=(f+g-e)%7;n=(f+3-d)|0;if(n<0){w=53-((g-s)/5|0);}else if(n>364+s){w=1;}else{w=(n/7|0)+1;}
$y=$m=$d=null;return w;};$P.getISOWeek=function(){$y=this.getUTCFullYear();$m=this.getUTCMonth()+1;$d=this.getUTCDate();return p(this.getWeek());};$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek());};$D._validate=function(n,min,max,name){if(typeof n=="undefined"){return false;}else if(typeof n!="number"){throw new TypeError(n+" is not a Number.");}else if(n<min||n>max){throw new RangeError(n+" is not a valid value for "+name+".");}
return true;};$D.validateMillisecond=function(value){return $D._validate(value,0,999,"millisecond");};$D.validateSecond=function(value){return $D._validate(value,0,59,"second");};$D.validateMinute=function(value){return $D._validate(value,0,59,"minute");};$D.validateHour=function(value){return $D._validate(value,0,23,"hour");};$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),"day");};$D.validateMonth=function(value){return $D._validate(value,0,11,"month");};$D.validateYear=function(value){return $D._validate(value,0,9999,"year");};$P.set=function(config){if($D.validateMillisecond(config.millisecond)){this.addMilliseconds(config.millisecond-this.getMilliseconds());}
if($D.validateSecond(config.second)){this.addSeconds(config.second-this.getSeconds());}
if($D.validateMinute(config.minute)){this.addMinutes(config.minute-this.getMinutes());}
if($D.validateHour(config.hour)){this.addHours(config.hour-this.getHours());}
if($D.validateMonth(config.month)){this.addMonths(config.month-this.getMonth());}
if($D.validateYear(config.year)){this.addYears(config.year-this.getFullYear());}
if($D.validateDay(config.day,this.getFullYear(),this.getMonth())){this.addDays(config.day-this.getDate());}
if(config.timezone){this.setTimezone(config.timezone);}
if(config.timezoneOffset){this.setTimezoneOffset(config.timezoneOffset);}
if(config.week&&$D._validate(config.week,0,53,"week")){this.setWeek(config.week);}
return this;};$P.moveToFirstDayOfMonth=function(){return this.set({day:1});};$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())});};$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0){shift=occurrence-1;}
else if(occurrence===-1){this.moveToLastDayOfMonth();if(this.getDay()!==dayOfWeek){this.moveToDayOfWeek(dayOfWeek,-1);}
return this;}
return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,+1).addWeeks(shift);};$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset());};$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=Number(offset)*-6/10;return this.addMinutes(there-here);};$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset));};$P.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r.charAt(0)+r.substr(2);}else{r=(n+10000).toString();return"+"+r.substr(1);}};$P.getElapsed=function(date){return(date||new Date())-this;};if(!$P.toISOString){$P.toISOString=function(){function f(n){return n<10?'0'+n:n;}
return'"'+this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z"';};}
$P._toString=$P.toString;$P.toString=function(format){var x=this;if(format&&format.length==1){var c=$C.formatPatterns;x.t=x.toString;switch(format){case"d":return x.t(c.shortDate);case"D":return x.t(c.longDate);case"F":return x.t(c.fullDateTime);case"m":return x.t(c.monthDay);case"r":return x.t(c.rfc1123);case"s":return x.t(c.sortableDateTime);case"t":return x.t(c.shortTime);case"T":return x.t(c.longTime);case"u":return x.t(c.universalSortableDateTime);case"y":return x.t(c.yearMonth);}}
var ord=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return format?format.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if(m.charAt(0)==="\\"){return m.replace("\\","");}
x.h=x.getHours;switch(m){case"hh":return p(x.h()<13?(x.h()===0?12:x.h()):(x.h()-12));case"h":return x.h()<13?(x.h()===0?12:x.h()):(x.h()-12);case"HH":return p(x.h());case"H":return x.h();case"mm":return p(x.getMinutes());case"m":return x.getMinutes();case"ss":return p(x.getSeconds());case"s":return x.getSeconds();case"yyyy":return p(x.getFullYear(),4);case"yy":return p(x.getFullYear());case"dddd":return $C.dayNames[x.getDay()];case"ddd":return $C.abbreviatedDayNames[x.getDay()];case"dd":return p(x.getDate());case"d":return x.getDate();case"MMMM":return $C.monthNames[x.getMonth()];case"MMM":return $C.abbreviatedMonthNames[x.getMonth()];case"MM":return p((x.getMonth()+1));case"M":return x.getMonth()+1;case"t":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case"tt":return x.h()<12?$C.amDesignator:$C.pmDesignator;case"S":return ord(x.getDate());default:return m;}}):this._toString();};}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=+1;$P._nth=null;$P._is=false;$P._same=false;$P._isSecond=false;$N._dateElement="day";$P.next=function(){this._orient=+1;return this;};$D.next=function(){return $D.today().next();};$P.last=$P.prev=$P.previous=function(){this._orient=-1;return this;};$D.last=$D.prev=$D.previous=function(){return $D.today().last();};$P.is=function(){this._is=true;return this;};$P.same=function(){this._same=true;this._isSecond=false;return this;};$P.today=function(){return this.same().day();};$P.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}
return false;};$P.at=function(time){return(typeof time==="string")?$D.parse(this.toString("d")+" "+time):this.set(time);};$N.fromNow=$N.after=function(date){var c={};c[this._dateElement]=this;return((!date)?new Date():date.clone()).add(c);};$N.ago=$N.before=function(date){var c={};c[this._dateElement]=this*-1;return((!date)?new Date():date.clone()).add(c);};var dx=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),mx=("january february march april may june july august september october november december").split(/\s/),px=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),pxf=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),nth=("final first second third fourth fifth").split(/\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++){o[px[i].toLowerCase()]=this["get"+pxf[i]]();}
return o;};$D.fromObject=function(config){config.week=null;return Date.today().set(config);};var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}
if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}
this._isSecond=false;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp){throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");}
return this;}
return this.moveToDayOfWeek(n,this._orient);};};var sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();if(n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0){shift=shift+7;}
return t.addDays(shift);};};for(var i=0;i<dx.length;i++){$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i;$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i);$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);}
var mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}
return this.moveToMonth(n,this._orient);};};var smf=function(n){return function(){return $D.today().set({month:n,day:1});};};for(var j=0;j<mx.length;j++){$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j;$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j);$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);}
var ef=function(j){return function(){if(this._isSecond){this._isSecond=false;return this;}
if(this._same){this._same=this._is=false;var o1=this.toObject(),o2=(arguments[0]||new Date()).toObject(),v="",k=j.toLowerCase();for(var m=(px.length-1);m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v]){return false;}
if(k==v){break;}}
return true;}
if(j.substring(j.length-1)!="s"){j+="s";}
return this["add"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$P[de]=$P[de+"s"]=ef(px[k]);$N[de]=$N[de+"s"]=nf(de);}
$P._ss=ef("Second");var nthfn=function(n){return function(dayOfWeek){if(this._same){return this._ss(arguments[0]);}
if(dayOfWeek||dayOfWeek===0){return this.moveToNthOccurrence(dayOfWeek,n);}
this._nth=n;if(n===2&&(dayOfWeek===undefined||dayOfWeek===null)){this._isSecond=true;return this.addSeconds(this._orient);}
return this;};};for(var l=0;l<nth.length;l++){$P[nth[l]]=(l===0)?nthfn(-1):nthfn(l);}}());(function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp("^\s*"+s+"\s*"))(s);};},stoken:function(s){return _.rtoken(new RegExp("^"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}
break;}
return[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}
rx.push(r[0]);s=r[1];}
return[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}
return[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}
throw new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}
return rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}
if(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){r=null;}
if(r){return r;}}
throw new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}
rx.push(r[0]);s=r[1];}
return[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;if(px.length==1){return px[0];}
return function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}
rx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}
s=q[1];}
if(!r){throw new $P.Exception(s);}
if(q){throw new $P.Exception(q[1]);}
if(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}
return[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}
rx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}
if(!last&&q[1].length===0){last=true;}
if(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}
p=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}
if(rx[1].length<best[1].length){best=rx;}
if(best[1].length===0){break;}}
if(best[0].length===0){return best;}
if(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}
best[1]=q[1];}
return best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}
return rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}
if(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx="optional not ignore cache".split(/\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}
var _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx="each any all".split(/\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo;var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}
return rx;};$D.Grammar={};$D.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0]);};},month:function(s){return function(){this.month=(s.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(s)/4:Number(s)-1;};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<$C.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}
var now=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=now.getDate();}
if(!this.year){this.year=now.getFullYear();}
if(!this.month&&this.month!==0){this.month=now.getMonth();}
if(!this.day){this.day=1;}
if(!this.hour){this.hour=0;}
if(!this.minute){this.minute=0;}
if(!this.second){this.second=0;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.day>$D.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}
var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}
return r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}
for(var i=0;i<x.length;i++){if(typeof x[i]=="function"){x[i].call(this);}}
var today=$D.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else if(this.now){today=new Date();}
var expression=!!(this.days&&this.days!==null||this.orient||this.operator);var gap,mod,orient;orient=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){today.setTimeToNow();}
if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;expression=true;}}
if(!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(!this.month){this.month=temp.getMonth();}
this.year=temp.getFullYear();}
if(expression&&this.weekday&&this.unit!="month"){this.unit="day";gap=($D.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}
if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}
if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}
if(this.month&&!this.day&&this.value){today.set({day:this.value*1});if(!expression){this.day=this.value*1;}}
if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;expression=true;}
if(expression&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}
if(!this.unit){this.unit="day";}
if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*orient;}else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}
this[this.unit+"s"]=this.value*orient;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(temp.getMonth()!==today.getMonth()){this.month=temp.getMonth();}}
if((this.month||this.month===0)&&!this.day){this.day=1;}
if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}
if(expression&&this.timezone&&this.day&&this.days){this.day=this.days;}
return(expression)?today.add(this):today.set(this);}};var _=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=_.stoken(":");g.whiteSpace=_.rtoken(/^\s*/);g.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=$C.regexPatterns;var kx=keys.split(/\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}
fn=_C[keys]=_.any.apply(null,px);}
return fn;};g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian));g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday);g.unit=_.process(g.ctoken("second minute hour day week month year"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[$C.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw $D.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}
return _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats(["\"yyyy-MM-ddTHH:mm:ssZ\"","yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}
return g._start.call({},s);};$D._parse=$D.parse;$D.parse=function(s){var r=null;if(!s){return null;}
if(s instanceof Date){return s;}
try{r=$D.Grammar.start.call({},s.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};};$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s);};}());;(function($){$.fn.booklet=function(options){var o=$.extend({},$.fn.booklet.defaults,options);return $(this).each(function()
{var command,config,obj,id,i,target;if(typeof options=='string')
{if($(this).data('booklet')){command=options.toLowerCase();obj=$.fn.booklet.interfaces[$(this).data('id')];if(command=='next'){obj.next()}
else if(command=='prev'){obj.prev()}}}
else if(typeof options=='number')
{if($(this).data('booklet')){target=options;obj=$.fn.booklet.interfaces[$(this).data('id')];if(target%2!=0){target-=1;}
obj.gotoPage(target);}}
else
{config=$.extend(true,{},o);id=$.fn.booklet.interfaces.length;for(i=0;i<id;i++)
{if(typeof $.fn.booklet.interfaces[i]=='undefined'){id=i;break;}}
obj=new booklet($(this),config,id);$.fn.booklet.interfaces[id]=obj;}});}
function booklet(target,options,id){var self,opts,b,src,hash,i,j,p,diff,busy,init,rhover,lhover,titles=new Array(),chapters=new Array(),pN,p0,p1,p2,p3,p4,pNwrap,p0wrap,p1wrap,p2wrap,p3wrap,p4wrap,wraps,sF,sB,overlays,overlayN,overlayP,tabs,tabN,tabP,arrows,arrowN,arrowP,next,prev,ctrlsN,ctrlsP,menu,chapter,dd,ddUL,ddH,ddLI,ddA,ddT,ddC,ddCUL,ddCH,ddCLI,ddCA,ddCT,empty='<div class="b-page-empty" title="" rel=""></div>',blank='<div class="b-page-blank" title="" rel=""></div>';busy=false;init=false;rhover=lhover=false;self=this;self.options=options;self.id=id;self.hash='';opts=self.options;b=target.addClass('booklet');src=b.children('.b-load');initPages();b.data('booklet',true);b.data('id',id);b.data('total',src.children().length);if(!opts.width){opts.width=b.width();}
if(!opts.height){opts.height=b.height();}
b.width(opts.width);b.height(opts.height);opts.pWidth=opts.width/2;opts.pWidthN='-'+(opts.width/2)+'px';opts.pWidthH=opts.width/4;opts.pHeight=opts.height;opts.pTotal=src.children().length;opts.speedH=opts.speed/2;if(opts.direction=='LTR'){opts.curr=0;}else if(opts.direction=='RTL'){opts.curr=opts.pTotal-2;}
if(!isNaN(opts.startingPage)&&opts.startingPage<=opts.pTotal&&opts.startingPage>0){if((opts.startingPage%2)!=0){opts.startingPage--};opts.curr=opts.startingPage;}
if(opts.name){document.title=opts.name;}else{opts.name=document.title;}
if(opts.shadows){opts.shadowTopFwdWidth='-'+opts.shadowTopFwdWidth+'px';opts.shadowTopBackWidth='-'+opts.shadowTopBackWidth+'px';}
if(opts.menu){menu=$(opts.menu).addClass('b-menu');p=opts.curr;if(opts.pageSelector){dd=$('<div class="b-selector b-selector-page"><span class="b-current">'+(p+1)+' - '+(p+2)+'</span></div>').appendTo(menu);ddUL=$('<ul></ul>').appendTo(dd).empty().css('height','auto');for(i=0;i<opts.pTotal;i+=2){j=i;nums=(j+1)+'-'+(j+2);if(opts.closed){j--;if(i==0){nums='1'}
else if(i==opts.pTotal-2){nums=opts.pTotal-2}
else{nums=(j+1)+'-'+(j+2);}
if(opts.covers){j--;if(i==0){nums=''}
else if(i==opts.pTotal-2){nums=''}
else{nums=(j+1)+'-'+(j+2);}}}
if(opts.direction=='RTL'){nums=(Math.abs(j-opts.pTotal)-1)+' - '+((Math.abs(j-opts.pTotal)));if(opts.closed){if(i==opts.pTotal-2){nums='1'}
else if(i==0){nums=opts.pTotal-2}
else{nums=(Math.abs(j-opts.pTotal)-3)+' - '+((Math.abs(j-opts.pTotal)-2));}
if(opts.covers){if(i==opts.pTotal-2){nums=''}
else if(i==0){nums=''}
else{nums=(Math.abs(j-opts.pTotal)-5)+' - '+((Math.abs(j-opts.pTotal)-4));}}}
dd.find('.b-current').text(nums);ddLI=$('<li><a href="#/page/'+(i+1)+'" id="selector-page-'+i+'"><span class="b-text">'+titles[i+1]+'</span><span class="b-num">'+nums+'</span></a></li>').prependTo(ddUL);}else{if(i==0){dd.find('.b-current').text(nums);}
ddLI=$('<li><a href="#/page/'+(i+1)+'" id="selector-page-'+i+'"><span class="b-text">'+titles[i]+'</span><span class="b-num">'+nums+'</span></a></li>').appendTo(ddUL);}
ddA=ddLI.find('a');if(!opts.hash){ddA.click(function(){if(opts.direction=='RTL'){dd.find('.b-current').text($(this).find('.b-num').text());}
ddT=parseInt($(this).attr('id').replace('selector-page-',''));self.gotoPage(ddT);return false;});}}
ddH=ddUL.height();ddUL.css({'height':0,'padding-bottom':0});dd.unbind('hover').hover(function(){ddUL.stop().animate({height:ddH,paddingBottom:10},500);},function(){ddUL.stop().animate({height:0,paddingBottom:0},500);});}
if(opts.chapterSelector){chapter=chapters[opts.curr];if(chapter==""){chapter=chapters[opts.curr+1];}
ddC=$('<div class="b-selector b-selector-chapter"><span class="b-current">'+chapter+'</span></div>').appendTo(menu);ddCUL=$('<ul></ul>').appendTo(ddC).empty().css('height','auto');for(i=0;i<opts.pTotal;i+=1){if(chapters[i]!=""&&typeof chapters[i]!="undefined"){if(opts.direction=='RTL'){j=i;if(j%2!=0){j--;}
ddC.find('.b-current').text(chapters[i]);ddCLI=$('<li><a href="#/page/'+(j+1)+'" id="selector-page-'+(j)+'"><span class="b-text">'+chapters[i]+'</span></a></li>').prependTo(ddCUL);}else{ddCLI=$('<li><a href="#/page/'+(i+1)+'" id="selector-page-'+i+'"><span class="b-text">'+chapters[i]+'</span></a></li>').appendTo(ddCUL);}
ddCA=ddCLI.find('a');if(!opts.hash){ddCA.click(function(){if(opts.direction=='RTL'){ddC.find('.b-current').text($(this).find('.b-text').text());}
ddCT=parseInt($(this).attr('id').replace('selector-page-',''));self.gotoPage(ddCT);return false;});}}}
ddCH=ddCUL.height();ddCUL.css({'height':0,'padding-bottom':0});ddC.unbind('hover').hover(function(){ddCUL.stop().animate({height:ddCH,paddingBottom:10},500);},function(){ddCUL.stop().animate({height:0,paddingBottom:0},500);});}}
$.extend(self,{next:function(){if(!busy){self.gotoPage(opts.curr+2);}},prev:function(){if(!busy){self.gotoPage(opts.curr-2);}},gotoPage:function(num){if(num>opts.curr&&num<opts.pTotal&&num>=0&&!busy){busy=true;diff=num-opts.curr;opts.curr=num;opts.before.call(self,opts);updatePager();updateCtrls();updateHash(opts.curr+1,opts);initAnim(diff,true,sF);p2.stop().animate({width:0},opts.speedH,opts.easeIn);p3.stop().animate({left:opts.pWidthH,width:opts.pWidthH,paddingLeft:opts.shadowBtmWidth},opts.speedH,opts.easeIn).animate({left:0,width:opts.pWidth,paddingLeft:0},opts.speedH);p3wrap.animate({left:opts.shadowBtmWidth},opts.speedH,opts.easeIn).animate({left:0},opts.speedH,opts.easeOut,function(){updateAfter()});}else if(num<opts.curr&&num<opts.pTotal&&num>=0&&!busy){busy=true;diff=opts.curr-num;opts.curr=num;opts.before.call(self,opts);updatePager();updateCtrls();updateHash(opts.curr+1,opts);initAnim(diff,false,sB);p1.animate({left:opts.pWidth,width:0},opts.speed,opts.easing);p1wrap.animate({left:opts.pWidthN},opts.speed,opts.easing);p0.animate({left:opts.pWidthH,width:opts.pWidthH},opts.speedH,opts.easeIn).animate({left:opts.pWidth,width:opts.pWidth},opts.speedH,opts.easeOut);p0wrap.animate({right:opts.shadowBtmWidth},opts.speedH,opts.easeIn).animate({right:0},opts.speedH,opts.easeOut,function(){updateAfter()});}}});if(opts.next){next=$(opts.next);next.click(function(e){e.preventDefault();self.next();});}
if(opts.prev){prev=$(opts.prev);prev.click(function(e){e.preventDefault();self.prev();});}
if(opts.overlays){overlayP=$('<div class="b-overlay b-overlay-prev b-prev" title="Previous Page"></div>').appendTo(b);overlayN=$('<div class="b-overlay b-overlay-next b-next" title="Next Page"></div>').appendTo(b);overlays=b.find('.b-overlay');if($.browser.msie){overlays.css({'background':'#fff','filter':'progid:DXImageTransform.Microsoft.Alpha(opacity=0) !important'});}}
if(opts.tabs){tabP=$('<div class="b-tab b-tab-prev b-prev" title="Previous Page">Previous</div>').appendTo(b);tabN=$('<div class="b-tab b-tab-next b-next" title="Next Page">Next</div>').appendTo(b);tabs=b.find('.b-tab');if(opts.tabWidth){tabs.width(opts.tabWidth);}
if(opts.tabHeight){tabs.height(opts.tabHeight);}
tabs.css({'top':'-'+tabN.outerHeight()+'px'});b.css({'marginTop':tabN.outerHeight()});if(opts.direction=='RTL'){tabN.html('Previous').attr('title','Previous Page');tabP.html('Next').attr('title','Next Page');}}else{b.css({'marginTop':0});}
if(opts.arrows){arrowP=$('<div class="b-arrow b-arrow-prev b-prev" title="Previous Page"><div>Previous</div></div>').appendTo(b);arrowN=$('<div class="b-arrow b-arrow-next b-next" title="Next Page"><div>Next</div></div>').appendTo(b);arrows=b.find('.b-arrow');if(opts.direction=='RTL'){arrowN.html('<div>Previous</div>').attr('title','Previous Page');arrowP.html('<div>Next</div>').attr('title','Next Page');}}
ctrlsN=b.find('.b-next');ctrlsP=b.find('.b-prev');ctrlsN.click(function(e){e.preventDefault();self.next();});ctrlsP.click(function(e){e.preventDefault();self.prev();});if(opts.hovers){ctrlsN.hover(function(){if(!busy&&opts.curr+2<=opts.pTotal-2){p2.stop().animate({'width':opts.pWidth-40},500,opts.easing);p3.stop().animate({'left':opts.width-40,'width':20,paddingLeft:10},500,opts.easing);rhover=true;}},function(){if(!busy&&opts.curr+2<=opts.pTotal-2){p2.stop().animate({'width':opts.pWidth},500,opts.easing);p3.stop().animate({'left':opts.width,'width':0,paddingLeft:0},500,opts.easing);rhover=false;}});ctrlsP.hover(function(){if(!busy&&opts.curr-2>=0){p1.stop().animate({left:10,width:opts.pWidth-10},400,opts.easing);p1wrap.stop().animate({left:"-10px"},400,opts.easing);p0.stop().animate({left:10,width:40},400,opts.easing);p0wrap.stop().animate({right:10},400,opts.easing);lhover=true;}},function(){if(!busy&&opts.curr-2>=0){p1.stop().animate({left:0,width:opts.pWidth},400,opts.easing);p1wrap.stop().animate({left:0},400,opts.easing);p0.stop().animate({left:0,width:0},400,opts.easing);p0wrap.stop().animate({right:0},400,opts.easing);lhover=false;}});}
if(opts.arrows){if($.support.opacity){ctrlsN.hover(function(){arrowN.find('div').stop().fadeTo('fast',1);},function(){arrowN.find('div').stop().fadeTo('fast',0);});ctrlsP.hover(function(){arrowP.find('div').stop().fadeTo('fast',1);},function(){arrowP.find('div').stop().fadeTo('fast',0);});}else{ctrlsN.hover(function(){arrowN.find('div').show();},function(){arrowN.find('div').hide();});ctrlsP.hover(function(){arrowP.find('div').show();},function(){arrowP.find('div').hide();});}}
if(opts.keyboard){$(document).keyup(function(event){if(event.keyCode==37){self.prev();}
else if(event.keyCode==39){self.next();}});}
if(opts.hash){setupHash();clearInterval();setInterval(function(){pollHash()},250);}
resetPages();function initPages(){if((src.children().length%2)!=0){if(opts.closed&&opts.covers){src.children().last().before(blank);}else{src.children().last().after(blank);}}
if(opts.closed){$(empty).attr({'title':opts.closedFrontTitle||"Beginning",'rel':opts.closedFrontChapter||"Beginning of Book"}).prependTo(src);src.children().last().attr({'title':opts.closedBackTitle||"End",'rel':opts.closedBackChapter||"End of Book"});src.append(empty);}
if(opts.direction=='LTR'){j=0;}else{j=src.children().length;if(opts.closed){j-=2;}
if(opts.covers){j-=2;}
$(src.children().get().reverse()).each(function(){$(this).appendTo(src);});}
src.children().each(function(i){if($(this).attr('rel')){chapters[i]=$(this).attr('rel');}else{chapters[i]="";}
titles[i]=$(this).attr('title');if($(this).hasClass('b-page-empty')){$(this).wrap('<div class="b-page"><div class="b-wrap"></div></div>');}else if(opts.closed&&opts.covers&&(i==1||i==src.children().length-2)){$(this).wrap('<div class="b-page"><div class="b-wrap b-page-cover"></div></div>');}else if(i%2!=0){$(this).wrap('<div class="b-page"><div class="b-wrap b-wrap-right"></div></div>');}else{$(this).wrap('<div class="b-page"><div class="b-wrap b-wrap-left"></div></div>');}
$(this).parents('.b-page').addClass('b-page-'+i);if(opts.pageNumbers&&!$(this).hasClass('b-page-empty')&&(!opts.closed||(opts.closed&&!opts.covers)||(opts.closed&&opts.covers&&i!=1&&i!=src.children().length-2))){if(opts.direction=='LTR'){j++;}
$(this).parent().append('<div class="b-counter">'+(j)+'</div>');if(opts.direction=='RTL'){j--;}}});}
function resetPages(){b.find('.b-page').removeClass('b-pN b-p0 b-p1 b-p2 b-p3 b-p4').hide();if(init){j=opts.pTotal-1;for(i=0;i<opts.pTotal;i++){b.find('.b-page-'+i).detach().appendTo(src);}}
if(opts.curr-2>=0){b.find('.b-page-'+(opts.curr-2)).addClass('b-pN').show();b.find('.b-page-'+(opts.curr-1)).addClass('b-p0').show();}
b.find('.b-page-'+(opts.curr)).addClass('b-p1').show();b.find('.b-page-'+(opts.curr+1)).addClass('b-p2').show();if(opts.curr+3<=opts.pTotal){b.find('.b-page-'+(opts.curr+2)).addClass('b-p3').show();b.find('.b-page-'+(opts.curr+3)).addClass('b-p4').show();}
pN=b.find('.b-pN');p0=b.find('.b-p0');p1=b.find('.b-p1');p2=b.find('.b-p2');p3=b.find('.b-p3');p4=b.find('.b-p4');pNwrap=b.find('.b-pN .b-wrap');p0wrap=b.find('.b-p0 .b-wrap');p1wrap=b.find('.b-p1 .b-wrap');p2wrap=b.find('.b-p2 .b-wrap');p3wrap=b.find('.b-p3 .b-wrap');p4wrap=b.find('.b-p4 .b-wrap');wraps=b.find('.b-wrap');wraps.attr('style','');wraps.css({'width':opts.pWidth-(opts.pagePadding*2),'height':opts.pHeight-(opts.pagePadding*2),'padding':opts.pagePadding});p1.css({'left':0,'width':opts.pWidth,'height':opts.pHeight});p2.css({'left':opts.pWidth,'width':opts.pWidth,'opacity':1,'height':opts.pHeight});pN.css({'left':0,'width':opts.pWidth,'height':opts.pHeight});p0.css({'left':0,'width':0,'height':opts.pHeight});p3.stop().css({'left':opts.pWidth*2,'width':0,'height':opts.pHeight,paddingLeft:0});p3wrap.stop().css({'left':0});p4.css({'left':opts.pWidth,'width':opts.pWidth,'height':opts.pHeight});if(opts.curr+3<=opts.pTotal){p3.after(p0.detach());p1.after(p4.detach());}else{p0.detach().appendTo(src);}
init=true;sF=sB=null;b.find('.b-shadow-b, .b-shadow-f').remove();if(opts.shadows){sF=$('<div class="b-shadow-f"></div>').appendTo(p3).css({'right':0,'width':opts.pWidth,'height':opts.pHeight});sB=$('<div class="b-shadow-b"></div>').appendTo(p0).css({'left':0,'width':opts.pWidth,'height':opts.pHeight});}}
function initAnim(diff,inc,shadow){if(inc&&diff>2){b.find('.b-p3, .b-p4').removeClass('b-p3 b-p4').hide();b.find('.b-page-'+opts.curr).addClass('b-p3').show().stop().css({'left':opts.pWidth*2,'width':0,'height':opts.pHeight,paddingLeft:0});b.find('.b-page-'+(opts.curr+1)).addClass('b-p4').show().css({'left':opts.pWidth,'width':opts.pWidth,'height':opts.pHeight});b.find('.b-page-'+opts.curr+' .b-wrap').show().css({'width':opts.pWidth-(opts.pagePadding*2),'height':opts.pHeight-(opts.pagePadding*2),'padding':opts.pagePadding});b.find('.b-page-'+(opts.curr+1)+' .b-wrap').show().css({'width':opts.pWidth-(opts.pagePadding*2),'height':opts.pHeight-(opts.pagePadding*2),'padding':opts.pagePadding});p3=b.find('.b-p3');p4=b.find('.b-p4');p3wrap=b.find('.b-p3 .b-wrap');p4wrap=b.find('.b-p4 .b-wrap');if(rhover){p3.css({'left':opts.width-40,'width':20,'padding-left':10});}
shadow.appendTo(p3);p1.after(p4.detach());p2.after(p3.detach());}else if(!inc&&diff>2){b.find('.b-pN, .b-p0').removeClass('b-pN b-p0').hide();b.find('.b-page-'+opts.curr).addClass('b-pN').show().css({'left':0,'width':opts.pWidth,'height':opts.pHeight});b.find('.b-page-'+(opts.curr+1)).addClass('b-p0').show().css({'left':0,'width':0,'height':opts.pHeight});b.find('.b-page-'+opts.curr+' .b-wrap').show().css({'width':opts.pWidth-(opts.pagePadding*2),'height':opts.pHeight-(opts.pagePadding*2),'padding':opts.pagePadding});b.find('.b-page-'+(opts.curr+1)+' .b-wrap').show().css({'width':opts.pWidth-(opts.pagePadding*2),'height':opts.pHeight-(opts.pagePadding*2),'padding':opts.pagePadding});pN=b.find('.b-pN');p0=b.find('.b-p0');pNwrap=b.find('.b-pN .b-wrap');p0wrap=b.find('.b-p0 .b-wrap');if(lhover){p0.css({left:10,width:40});p0wrap.css({right:10});}
shadow.appendTo(p0);p0.detach().appendTo(src);}
if(opts.closed){if(!inc&&opts.curr==0){pN.hide();}else if(!inc){pN.show();}
if(inc&&opts.curr>=opts.pTotal-2){p4.hide();}else if(inc){p4.show();}}
if(opts.shadows){if($.support.opacity){shadow.animate({opacity:1},opts.speedH,opts.easeIn).animate({opacity:0},opts.speedH,opts.easeOut);}else{if(inc){shadow.animate({right:opts.shadowTopFwdWidth},opts.speed,opts.easeIn);}else{shadow.animate({left:opts.shadowTopBackWidth},opts.speed,opts.easeIn);}}}}
function updateAfter(){resetPages();updatePager();updateCtrls();opts.after.call(self,opts);busy=false;}
function updateCtrls(){if(opts.overlays||opts.tabs||opts.arrows){if(opts.curr<opts.pTotal-2){ctrlsN.fadeIn('fast').css('cursor',opts.cursor);}else{ctrlsN.fadeOut('fast').css('cursor','default');}
if(opts.curr>=2&&opts.curr!=0){ctrlsP.fadeIn('fast').css('cursor',opts.cursor);}else{ctrlsP.fadeOut('fast').css('cursor','default');}}}
function updatePager(){if(opts.pageSelector){if(opts.direction=='RTL'){nums=(Math.abs(opts.curr-opts.pTotal)-1)+' - '+((Math.abs(opts.curr-opts.pTotal)));if(opts.closed){if(opts.curr==opts.pTotal-2){nums='1'}
else if(opts.curr==0){nums=opts.pTotal-2}
else{nums=(Math.abs(opts.curr-opts.pTotal)-2)+' - '+((Math.abs(opts.curr-opts.pTotal)-1));}
if(opts.covers){if(opts.curr==opts.pTotal-2){nums=''}
else if(opts.curr==0){nums=''}
else{nums=(Math.abs(opts.curr-opts.pTotal)-3)+' - '+((Math.abs(opts.curr-opts.pTotal)-2));}}}
$(opts.menu+' .b-selector-page .b-current').text(nums);}else{nums=(opts.curr+1)+' - '+(opts.curr+2);if(opts.closed){if(opts.curr==0){nums='1'}
else if(opts.curr==opts.pTotal-2){nums=opts.pTotal-2}
else{nums=(opts.curr)+'-'+(opts.curr+1);}
if(opts.covers){if(opts.curr==0){nums=''}
else if(opts.curr==opts.pTotal-2){nums=''}
else{nums=(opts.curr-1)+'-'+(opts.curr);}}}
$(opts.menu+' .b-selector-page .b-current').text(nums);}}
if(opts.chapterSelector){if(chapters[opts.curr]!=""){$(opts.menu+' .b-selector-chapter .b-current').text(chapters[opts.curr]);}else if(chapters[opts.curr+1]!=""){$(opts.menu+' .b-selector-chapter .b-current').text(chapters[opts.curr+1]);}
if(opts.direction=='RTL'&&chapters[opts.curr+1]!=""){$(opts.menu+' .b-selector-chapter .b-current').text(chapters[opts.curr+1]);}else if(chapters[opts.curr]!=""){$(opts.menu+' .b-selector-chapter .b-current').text(chapters[opts.curr]);}}}
function setupHash(){hash=getHashNum();if(!isNaN(hash)&&hash<=opts.pTotal-1&&hash>=0&&hash!=''){if((hash%2)!=0){hash--;}
opts.curr=hash;}else{updateHash(opts.curr+1,opts);}
self.hash=hash;}
function pollHash(){hash=getHashNum();if(!isNaN(hash)&&hash<=opts.pTotal-1&&hash>=0){if(hash!=opts.curr&&hash.toString()!=self.hash){if((hash%2)!=0){hash--};document.title=opts.name+" - Page "+(hash+1);if(!busy){self.gotoPage(hash);self.hash=hash;}}}}
function getHashNum(){var hash=window.location.hash.split('/');if(hash.length>1){return parseInt(hash[2])-1;}else{return'';}}
function updateHash(hash,opts){if(opts.hash){window.location.hash="/page/"+hash;}}}
$.fn.booklet.interfaces=[];$.fn.booklet.defaults={name:null,width:600,height:400,speed:1000,direction:'LTR',startingPage:0,easing:'easeInOutQuad',easeIn:'easeInQuad',easeOut:'easeOutQuad',closed:false,closedFrontTitle:null,closedFrontChapter:null,closedBackTitle:null,closedBackChapter:null,covers:false,pagePadding:10,pageNumbers:true,hovers:true,overlays:true,tabs:false,tabWidth:60,tabHeight:20,arrows:false,cursor:'pointer',hash:false,keyboard:true,next:null,prev:null,menu:null,pageSelector:false,chapterSelector:false,shadows:true,shadowTopFwdWidth:166,shadowTopBackWidth:166,shadowBtmWidth:50,before:function(){},after:function(){}}})(jQuery);(function($){$.fn.snowfall=function(options){var element=this;random=function random(min,max){return Math.round(min+Math.random()*(max-min));}
function Flake(_x,_y,_size,_speed)
{this.id=flakeId;this.x=_x;this.y=_y;this.size=_size;this.speed=_speed;this.step=0,this.stepSize=random(1,10)/100;var flakeMarkup="<div class='flake' id='flake-"+this.id+"' style='width: "+this.size+"px; height: "+this.size+"px; background: transparent url(/merrychristmas/images/flakes-"+this.id+".png) no-repeat; position: absolute; top: "+this.y+"px; left:"+this.x+"px; z-index: "+options.flakeIndex+";'></div>";if($(element).get(0).tagName===$(document).get(0).tagName){$('body').append(flakeMarkup);}else{$(element).append(flakeMarkup);}
this.element=document.getElementById('flake-'+this.id);this.update=function(){this.y+=this.speed;if(this.y>(elHeight)-6){this.reset();}
this.element.style.top=this.y+'px';this.element.style.left=this.x+'px';this.step+=this.stepSize;this.x+=Math.cos(this.step);if(this.x>(elWidth)-6||this.x<6){this.reset();}}
this.reset=function(){this.y=0;this.x=random(0,elWidth);this.stepSize=random(1,10)/100;this.size=random((options.minSize*100),(options.maxSize*100))/100;this.speed=random(options.minSpeed,options.maxSpeed);}}
var flakes=[],flakeId=0,i=0,elHeight=$(element).height(),elWidth=$(element).width(),defaults={flakeCount:35,flakeColor:'#ffffff',flakeIndex:999999,minSize:1,maxSize:3,minSpeed:2,maxSpeed:3},options=$.extend(defaults,options);$(window).bind("resize",function(){elHeight=$(element).height();elWidth=$(element).width();});for(i=0;i<options.flakeCount;i+=1){flakeId=i;flakes[i]=new Flake(random(0,elWidth),random(0,elHeight),random((options.minSize*100),(options.maxSize*100))/100,random(options.minSpeed,options.maxSpeed));}
function snow(){for(i=0;i<options.flakeCount;i+=1){flakes[i].update();}
setTimeout(function(){snow()},30);}
snow();};})(jQuery);(function($){$.fn.cyclicFade=function(options)
{var opts=$.extend({},$.fn.cyclicFade.defaults,options);return this.each(function(){$.fn.cyclicFade.doCycle(this,1,opts.repeat,opts.params,0);});};$.fn.cyclicFade.defaults={repeat:0,params:[{fadeout:100,stayout:300,opout:0,fadein:100,stayin:300,opin:1.0}]};$.fn.cyclicFade.doCycle=function(obj,start,finish,paramsList,paramsPos){if(paramsPos>=paramsList.length){paramsPos=0;}
var params=paramsList[paramsPos];$(obj).fadeTo(params.fadeout,params.opout,function(){setTimeout(function(){$(obj).fadeTo(params.fadein,params.opin,function(){setTimeout(function(){if(start!=finish){if(start<finish){start++;}
$.fn.cyclicFade.doCycle(obj,start,finish,paramsList,paramsPos+1);}},params.stayin)})},params.stayout)});};})(jQuery);